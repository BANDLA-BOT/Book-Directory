"use strict";var Book=require("../model/book.js"),searchBook=function(r,t){var o,n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=r.query.search,e.next=4,regeneratorRuntime.awrap(Book.find({$or:[{title:{$regex:o,$options:"i"}},{author:{$regex:o,$options:"i"}},{genre:{$regex:o,$options:"i"}}]}));case 4:n=e.sent,t.json(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.status(500).json({message:"Error searching books",error:e.t0});case 11:case"end":return e.stop()}},null,null,[[0,8]])},getAll=function(e,r){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(Book.find());case 3:(t=e.sent)||r.status(404).json({message:"Books not found"}),r.status(200).json({message:"Books found are",Books:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r.json({message:"Error while fetching ",error:e.t0});case 11:case"end":return e.stop()}},null,null,[[0,8]])},getBookById=function(r,t){var o,n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.params.id,e.prev=1,e.next=4,regeneratorRuntime.awrap(Book.findById(o));case 4:(n=e.sent)?t.status(200).json({message:"Book Found",book:n}):t.json({message:"Book not found"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t.status(400).json({message:"Error while fetching book by ID"});case 11:case"end":return e.stop()}},null,null,[[1,8]])},postBook=function(r,t){var o,n,s,a,u,c;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.body,n=o.title,s=o.author,a=o.year,u=o.genre,e.prev=1,e.next=4,regeneratorRuntime.awrap(Book.create({title:n,author:s,year:a,genre:u}));case 4:c=e.sent,t.json({message:"Book Uploaded successfully",Book:c}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t.json({message:"Error while uploading Books",error:e.t0.message});case 11:case"end":return e.stop()}},null,null,[[1,8]])},deleteBook=function(r,t){var o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.params.id,e.prev=1,e.next=4,regeneratorRuntime.awrap(Book.findByIdAndDelete(o));case 4:e.sent?t.status(200).json({message:"Book deleted Successfully"}):t.status(404).json({message:"Book not found"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t.status(500).json({message:"Error while deleting Book",error:e.t0.message});case 11:case"end":return e.stop()}},null,null,[[1,8]])},updateBook=function(r,t){var o,n,s,a,u,c,i;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.params.id,n=r.body,s=n.title,a=n.author,u=n.year,c=n.genre,e.prev=2,e.next=5,regeneratorRuntime.awrap(Book.findByIdAndUpdate(o,{title:s,author:a,year:u,genre:c},{new:!0}));case 5:(i=e.sent)?t.status(200).json({message:"Updated successfully",book:i}):t.status(404).json({message:"Book not found"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),t.status(400).json({message:"Error while updating Book",error:e.t0.message});case 12:case"end":return e.stop()}},null,null,[[2,9]])};module.exports={getAll:getAll,postBook:postBook,deleteBook:deleteBook,updateBook:updateBook,getBookById:getBookById,searchBook:searchBook};
//# sourceMappingURL=controllers.min.js.map
